---
title: "Data Analysis Project"
output: html_notebook
author: Sandra Smith, Lauren Bentley, Katelynn Winebrenner
---

This is an [R Markdown](http://rmarkdown.rstudio.com) Notebook. When you execute code within the notebook, the results appear beneath the code. 

Try executing this chunk by clicking the *Run* button within the chunk or by placing your cursor inside it and pressing *Cmd+Shift+Enter*. 


## Introduction, Preliminary Analysis and Definitions

In this notebook, we are analyzing Maryland precinct data from the 2020 and 2024 elections. To do this, we have loaded in 2 data sets from the Maryland State Board of Elections. 

The 2020 data set has 23 columns and 95283 rows. 
The 2024 data set has 21 columns and 117875 rows. 
Both data sets show each precinct, information about the precinct, each race, each candidate, the winner, how many votes each candidate received and method of vote. 

Because each year has different candidates and different races, we should identify which races happened both years and in all counties in order to make a clear analysis. We should also identify clear candidates in each race so that we aren't analyzing someone who is listed, but received one write in vote, for example.

To meet these parameters, we will focus on the race for president because it happened both years and in every precinct. In terms of candidates, we will focus on Donald Trump and Joe Biden for 2020 and Kamala Harris and Donald Trump for 2024.

We should be able to answer most of our questions with this data. However, we will need to load in data from the census in order to answer questions about economic status and identify. I don't know how easy that will be to do by precinct, but we'll see. We'll also need to include information about eligible voters and registered voters to determine turnout.


```{r echo=FALSE, message=FALSE}
options(scipen=999)
library(tidyverse)
library(lubridate)
library(tidycensus)
library(janitor)
```
## Load and Clean Data
```{r}
# Load required data
#setwd("~/Documents/GitHub/data_journalism_2025_spring/data_analysis")

uncleaned_precincts2020 <- read_csv("data/All_By_Precinct_2020_General.csv")
uncleaned_precincts2024 <- read_csv("data/PG24_AllPrecincts.csv")

```

```{r}
# Clean 2020, column names to match, county names, combine column district and column precinct, select columns
precincts2020 <- uncleaned_precincts2020 |>
  clean_names() |>
  mutate(county_name = case_when(
    county == "01" ~ "Allegany County",
    county == "02" ~ "Anne Arundel County",
    county == "03" ~ "Baltimore City",
    county == "04" ~ "Baltimore County",
    county == "05" ~ "Calvert County",
    county == "06" ~ "Caroline County",
    county == "07" ~ "Carroll County",
    county == "08" ~ "Cecil City",
    county == "09" ~ "Charles County",
    county == "10" ~ "Dorchester County",
    county == "11" ~ "Frederick County",
    county == "12" ~ "Garrett County",
    county == "13" ~ "Harford County",
    county == "14" ~ "Howard County",
    county == "15" ~ "Kent County",
    county == "16" ~ "Montgomery County",
    county == "17" ~ "Prince George's County",
    county == "18" ~ "Queen Anne's City",
    county == "19" ~ "Saint Mary's County",
    county == "20" ~ "Somerset County",
    county == "21" ~ "Talbot County",
    county == "22" ~ "Washington County",
    county == "23" ~ "Wicomico County",
    county == "24" ~ "Worcester County"
  ))|>
  mutate(election_district_precinct = str_c(election_district, election_precinct, sep = "-"),
         year = 2020)|> #chatgpt, str_c function to combine two column outputs by - in single column
  rename(
    election_day = election_day_votes,
    early= early_voting_votes,
    mail_in_1= by_mail_votes,
    mail_in_2 = by_mail_2_votes,
    provisional= prov_votes,
    total= total_votes,
    candidate_name = candidate_name,
    party = party
         )|>
      select(year,county, county_name, election_district_precinct, office_name, candidate_name, party, election_day, early, mail_in_1, mail_in_2, provisional, total)|>
  filter(
    office_name == "President - Vice Pres", 
    candidate_name %in% c("Joe Biden", "Donald J. Trump")) #%n% from chatgpt
```


```{r}
# Clean 2024, column names to match, create total votes, select columns
precincts2024 <- uncleaned_precincts2024|>
  clean_names()|>
   rename(
     election_day = election_night_votes,
     mail_in_1 = mail_in_ballot_1_votes,
     mail_in_2 = mail_in_ballot_2_votes,
     early = early_votes,
     provisional= provisional_votes,
     candidate_name = candidate_name,
     party = party
     )|>
  mutate(
    total = (election_day + mail_in_1 + mail_in_2 + early + provisional),
    year = 2024
  )|>
  
    select(year, county, county_name, election_district_precinct, office_name, candidate_name, party, election_day, early, mail_in_1, mail_in_2, provisional, total)|>
 filter(
    office_name == "President - Vice Pres",
    candidate_name %in% c("Kamala D. Harris and Tim Walz", "Donald J. Trump and JD Vance") #%n% from chatgpt
  )

```

```{r}
# combine dataframes, not joining, but placing them on top of one another
precincts_combined <- bind_rows(precincts2020, precincts2024)

```
## Questions to answer
In this notebook, we are answering five questions about the data.

### Question 1

* **Question**: Which precincts experienced the most significant change in party support? 

* **Analysis summary**: 

```{r}

```






### Question 2

* **Question**: How did voter turnout vary across precincts? What factors contributed to this? 

* **Analysis summary**: 

```{r}

```





### Question 3

* **Question**: How did early voting and mail-in ballots influence precinct-level results? 


* **Analysis summary**: 

```{r}

```





### Question 4

* **Question**: How did voting behavior differ between precincts based on economic status? 

* **Analysis summary**: 
```{r}

```





### Question 5

* **Question**: How did voting behavior differ between races, genders and age groups? 

* **Analysis summary**: 
```{r}

```


Add a new chunk by clicking the *Insert Chunk* button on the toolbar or by pressing *Cmd+Option+I*.

When you save the notebook, an HTML file containing the code and output will be saved alongside it (click the *Preview* button or press *Cmd+Shift+K* to preview the HTML file). 

The preview shows you a rendered HTML copy of the contents of the editor. Consequently, unlike *Knit*, *Preview* does not run any R code chunks. Instead, the output of the chunk when it was last run in the editor is displayed.

